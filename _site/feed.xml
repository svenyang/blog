<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>记录下一些琐碎的事情</title>
    <description>...</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sun, 27 Nov 2016 23:43:21 +0800</pubDate>
    <lastBuildDate>Sun, 27 Nov 2016 23:43:21 +0800</lastBuildDate>
    <generator>Jekyll v3.3.1</generator>
    
      <item>
        <title>PC游戏直播</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;本周项目上线了，遇到了一些问题，这些问题应该具有普遍性的意义，做下思路整理并记录下来&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;架构&lt;/h2&gt;
&lt;p&gt;目前因为同时观看人数较少，所以架构相对简单一些，推流Server（源站）、边缘节点、cdn等，但问题集中出现在几个相对较小的点上。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- 网络流量
- 缓存
- 客户端接入速度
- 播放器策略
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-2&quot;&gt;网络流量&lt;/h3&gt;
&lt;p&gt;由于缺乏统一的网络拓扑结构图以及相关的底层监控，所以对网络的流量问题查询时间比较长，最开始怀疑是服务器本身异常导致播放器下载慢，但按照流量数据和观看人数计算，刚好问题出现在某一个点，简单的计算一下，就容易发现问题在服务器带宽上，但因接手这个项目几天时间，对整个直播网络架构没有一个清晰的了解，所以一边询问运维部署方式，一边上机器查询网络流量，果然这里有问题，但网络调整并不是立即能够进行的。&lt;/p&gt;

&lt;h3 id=&quot;section-3&quot;&gt;缓存&lt;/h3&gt;
&lt;p&gt;CDN可以对hls的分片进行缓存，但目前尚未对m3u8进行缓存，因为m3u8的文件较小，且变动较为频繁，缓存的意义不是很大，能够想到的优化方式有两种&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;对m3u8放置内存中，映射到磁盘上，可以提高读取和写入速度（前端访问使用使用nginx）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将m3u8的访问方式修改为接口访问，可成数量级的提高性能，目前较为主流的访问方式&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-4&quot;&gt;客户端接入速度&lt;/h3&gt;
&lt;p&gt;接入速速对客户端网络及带宽都已依赖&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;网速&lt;/p&gt;

    &lt;p&gt;客户端对于若干接入点的速度测试，可以采用客户端抽样测试上报，后台统一调配的方式进行，缺点是数据样本需要大，且需要用专门的server去计算，并将结果以某种方式通知客户端。&lt;/p&gt;

    &lt;p&gt;还可以使用客户端轮训测速的逻辑，但推流端好做，观看方相对难以实现，或许cdn能够解决问题，但更加精细控制的逻辑还是需要自己实现。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;带宽&lt;/p&gt;

    &lt;p&gt;不同地区的网络差异性较大，且存在运营商穿越的问题，所以简单的可以通过cdn来调配，负责的还是需要明确客户端的带宽及后台带宽。最好经过简单的计算和测试，至少拥有一些测试工具，当出现问题的时候，可以请用户帮忙测试并反馈，就可以做到简单的调度逻辑&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-5&quot;&gt;播放器策略&lt;/h3&gt;
&lt;p&gt;以前对播放器的了解并不是很多，现在才发现，不用的hls library的区别还是比较大的，播放器我不是很熟悉，所以当出现卡顿的时候，如果是明确是播放器的问题，可以尝试换个library或者是增加分片预缓存的方式解决&lt;/p&gt;

&lt;h2 id=&quot;last&quot;&gt;last&lt;/h2&gt;
&lt;p&gt;目前暂时遇到这些问题，但可以想象，观看人数越多，问题也就越多，但基本的网络架构固定了，后面就是一些调度优化的问题。hls简单在于cdn国内外都有成熟的方案，而rtmp的cdn加速只有国内做的比较好，海外包括amazon和akami都没有跟上&lt;/p&gt;

&lt;p&gt;望自勉&lt;/p&gt;
</description>
        <pubDate>Sun, 27 Nov 2016 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2016/11/27/garena_tv/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/27/garena_tv/</guid>
        
        <category>视频</category>
        
        
      </item>
    
      <item>
        <title>曼谷的感受</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;生活工作节奏&lt;/h2&gt;
&lt;p&gt;出差到曼谷已经第七天了，说说来曼谷的感受，整体感觉类似于国内的二线城市，&lt;strong&gt;生活节奏慢&lt;/strong&gt;，这个要展开好好的讲&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;哈哈，上班时间晚，下班早，感觉很舒服。&lt;/p&gt;

  &lt;p&gt;早上8点多醒来，洗澡，收拾，下楼去吃早饭，&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG19.jpeg?x-oss-process=style/big&quot; alt=&quot;hotel&quot; /&gt;觉得我已经够磨蹭了，出宾馆才刚刚9点多，看着外面美美的天气，觉得在泰国出差是件不错的事情。到了街上才看到上班族在着急的赶路，办公室里面基本上是空空荡荡的，10点多才慢慢的人多起来，估计泰国人的幸福感爆棚。偶尔也会经常看到11点多才匆匆来到的同事&lt;/p&gt;

  &lt;p&gt;下午5点多下班的大有人在，因为远离总部，再加上分公司没有非常明确的负责人，所以有些放羊的感觉。昨天下午，有几位同事拉着行李箱匆匆的到来，一问才知，泰国的游戏运营出现问题，运维紧急从新加坡飞过来处理，到了办公室没几分钟就赶往IDC。&lt;/p&gt;

  &lt;p&gt;有的时候很疑惑，但是想想，市场培养的需要，当市场成熟了再进来就已经很晚，不知道泰国给IT业有什么优惠政策&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;泰国人喜欢吃酸辣、甜辣，还有各种味道的香料，第一天的晚饭，在路边参观随便点了4个菜，最后只吃了两个，牛肉和鸡肉，其他的两个实在不习惯，不记得菜单名，可能里面有pappaya，反正我是很不习惯，那个味道在我每次路过商店的时候就要屏住呼吸快速通过。&lt;/p&gt;

&lt;p&gt;餐馆的各种spicy，有的时候称为辣椒，但更多的时候代表带有辣椒的调味料，因为在日本寿司店，spicy含有孜然😀，感觉神奇&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;夜生活&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;丰富&lt;/strong&gt;，除了用这两个字来形容实在是么有别的了，宾馆旁边有个夜市，晚上生意很好，烧烤、路边摊小食、酒吧、买衣服化妆品的，各种味道和肤色的人种夹杂在一起。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG32.jpeg?x-oss-process=style/big&quot; alt=&quot;food&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG33.jpeg?x-oss-process=style/big&quot; alt=&quot;food&quot; /&gt;&lt;/p&gt;

&lt;p&gt;so，晚上下了班以后，可以在这里喝喝酒，抽抽烟，聊聊天，哈哈，特别是从新加坡机场购买的雪茄，感受下雪茄醇厚的烟草香味。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG21.jpeg?x-oss-process=style/big&quot; alt=&quot;walkstreet&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;关于华人和名字&lt;/h2&gt;
&lt;p&gt;华人在泰国中所占比重不少，官方统计为14%，但是听说泰族和傣族同源（有种华人占绝大多数的感觉😂），因为上世纪五六十年代的改名运动，现在已经看不到华人的姓氏，听说越长的姓氏，表示华人血统越浓厚，对于这个我表示😄，了解这个也没啥用，哦，可以作为搭讪的话语！！不过华人的皮肤还是很白的
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG17.jpeg?x-oss-process=style/big&quot; alt=&quot;chinatown&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;其他的风景&lt;/h2&gt;
&lt;p&gt;放几张图结束，这次出差没有带单反，用mate7拍的，以后看看搞个微单玩玩，轻便好带
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG27.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG24.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG23.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG28.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG26.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;
&lt;img src=&quot;http://sven-blog.oss-cn-shanghai.aliyuncs.com/2016-11-16/WechatIMG8.jpeg?x-oss-process=style/big&quot; alt=&quot;beautifull&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 16 Nov 2016 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2016/11/16/suibi/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/16/suibi/</guid>
        
        <category>随笔</category>
        
        <category>见闻</category>
        
        <category>感想</category>
        
        <category>泰国</category>
        
        
      </item>
    
      <item>
        <title>第一篇github.io文章</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;主旨&lt;/h2&gt;
&lt;p&gt;一直以来，都有短暂的记录日志的习惯，或多或少，以前在cnblog、QZone、甚至是百度空间上，但是随着工作和年龄的日益增大，人也慢慢懒惰下来了，已经没有了以前记录随笔的习惯，心里总觉得缺乏点什么。&lt;/p&gt;

&lt;p&gt;这两天买了个域名，看到github page，眼前一亮，于是就搭建起来这个jekyll的个人博客网站。计划以后有事没事写点东西，给自己看也给别人看。工作、随想或者来点别的&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;图床&lt;/h2&gt;
&lt;p&gt;近半年来给自己找了点爱好，去摄影，但是缺乏照片存放地方，看来以后可以放到这里，或者找个图床上传照片，可以引用到这里，反正markdown引用图片很是方便&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;最后&lt;/h2&gt;
&lt;p&gt;顺便装逼一下&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;					svenyang@bangkok
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 15 Nov 2016 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2016/11/15/hello/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/15/hello/</guid>
        
        <category>随笔</category>
        
        
      </item>
    
  </channel>
</rss>
